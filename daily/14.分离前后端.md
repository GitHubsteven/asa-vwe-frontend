##### 当前
当前：webpack+vue+express，前后端是一起的，通过webpack来打包，通过下面的脚本可以很容易的指导：
```
"buildDev": "DEL /F /Q dist  & webpack --mode development --config webpack.server.config.js & webpack --mode development --config webpack.dev.config.js",
```
在打包的时候，webpack将前端和服务器分割开了，最终的结合方式是/dist/index.html
通过下面的代码我们可以知道：
```
app.get("/", (req, res) => {
  res.sendFile(path.join(__dirname, 'index.html'));
});
```
通过服务器的方位端口后 http://ip:port/
express服务器会将webpack打包生成后的index.html发送到服务器，后面所有的操作都是通过express来操作，然后在部署服务器上的时候，重复下这个流程就可以了，理论上来说，这其实和spring boot + thymeleaf并没有什么区别。
虽然可以实现需求，但是总的来说是很奇怪的。所以，打算将项目分开来，前端和后端分割开来，分开的项目参考一：
前端：[asa-vwe-fronted-2.0](https://github.com/GitHubsteven/asa-vwe-frontend-2.0)
后端：[asa-vwe-express](https://github.com/GitHubsteven/asa-vwe-express)
不分离：[asa-vwe-frontend](https://github.com/GitHubsteven/asa-vwe-frontend)

方式二：参靠不同的分支
前端: asa-vwe-vue
后端: asa-vwe-express
不分离： master|master-mongodb-2



根据当前的项目来删除部分的代码可以拆分前后端。

##### 生成前端工程
生成前端工程需要删除express的相关，开发环境通过dev/server来启动。
1. 删除/src/server/*，删除server相关的
2. 删除/src/ex-router/*，删除express的路由
3. 删除webpack.server.config.js文件
4. 安装webpack-dev-server@3.9.0，执行下面的代码
```
npm i webpack-dev-server@3.9.0 -g
```
4. 在webpack.dev.config.js中增加dev-server，修改代码如下：
```
/* eslint-disable no-undef */
const path = require('path');
const webpack = require('webpack');
const HtmlWebPackPlugin = require('html-webpack-plugin');
const {VueLoaderPlugin} = require('vue-loader');
let port = {
    frontend: 9000,
    api: 9090
};


module.exports = {
    entry: {
        main: './src/index.js'
        // main: ['webpack-hot-middleware/client?path=/__webpack_hmr&timeout=20000',
        //     './src/index.js']
    },
    output: {
        path: path.join(__dirname, 'dist'),
        publicPath: '/',
        filename: '[name].js'
    },
    resolve: {
        extensions: ['.js', '.vue']
    },
    mode: 'development',
    target: 'web',
    devtool: 'source-map',
    module: {
        rules: [
            {
                test: /\.vue?$/,
                exclude: /(node_modules)/,
                use: 'vue-loader'
            },
            {
                test: /\.js?$/,
                exclude: /(node_modules)/,
                use: 'babel-loader'
            },
            // {
            //     enforce: "pre",
            //     test: /\.js$/,
            //     exclude: /node_modules/,
            //     loader: "eslint-loader",
            //     options: {
            //         emitWarning: true,
            //         failOnError: false,
            //         failOnWarning: false
            //     },
            // },
            {
                // Loads the javacript into html template provided.
                // Entry point is set below in HtmlWebPackPlugin in Plugins
                test: /\.html$/,
                use: [
                    {
                        loader: "html-loader",
                        //options: { minimize: true }
                    }
                ]
            },
            {
                test: /\.css$/,
                use: ['style-loader', 'css-loader']
            },
            {
                test: /\.(png|svg|jpg|gif)$/,
                use: ['file-loader']
            },
            {
                test: /\.(eot|svg|ttf|woff|woff2)(\?\S*)?$/,
                loader: 'file-loader'
            }
        ]
    },
    plugins: [
        new HtmlWebPackPlugin({
            template: "./src/html/index.html",
            // filename: "./index.html",
            excludeChunks: ['server']
        }),
        new webpack.HotModuleReplacementPlugin(),
        new webpack.NoEmitOnErrorsPlugin(),
        new VueLoaderPlugin()
    ],
    devServer: {
        historyApiFallback: true,
        port: port.frontend,
        contentBase: path.join(__dirname, "dist"),
        proxy: {
            '/api': {
                target: 'http://localhost:' + port.api,
                changeOrigin: true,
                pathRewrite: {'/api': ''}
            }
        }
    }
};
```
主要修改如下：
    1. 通过增加dev-server来代替webpack-hot-middleware
    2. 修改main的入口js文件
5. 修改webpack.prod.config.js文件如下：
```
/* eslint-disable no-undef */
const path = require("path");
const HtmlWebPackPlugin = require("html-webpack-plugin");
const MiniCssExtractPlugin = require("mini-css-extract-plugin");
const UglifyJsPlugin = require("uglifyjs-webpack-plugin");
const OptimizeCSSAssetsPlugin = require("optimize-css-assets-webpack-plugin");
const {VueLoaderPlugin} = require('vue-loader');
const webpack = require('webpack');
module.exports = {
    entry: {
        main: './src/index.js'
    },
    output: {
        path: path.join(__dirname, 'dist'),
        publicPath: '/',
        filename: '[name].js'
    },
    target: 'web',
    devtool: 'source-map',
    // Webpack 4 does not have a CSS minifier, although
    // Webpack 5 will likely come with one
    optimization: {
        minimizer: [
            new UglifyJsPlugin({
                cache: true,
                parallel: true,
                sourceMap: true // set to true if you want JS source maps
            }),
            new OptimizeCSSAssetsPlugin({})
        ]
    },
    module: {
        rules: [
            {
                test: /\.vue?$/,
                exclude: /(node_modules)/,
                use: 'vue-loader'
            },
            {
                test: /\.js?$/,
                exclude: /(node_modules)/,
                use: 'babel-loader'
            },
            // {
            //     enforce: "pre",
            //     test: /\.js$/,
            //     exclude: /node_modules/,
            //     loader: "eslint-loader",
            //     options: {
            //         emitWarning: true,
            //         failOnError: false,
            //         failOnWarning: false
            //     },
            // },
            {
                // Loads the javacript into html template provided.
                // Entry point is set below in HtmlWebPackPlugin in Plugins
                test: /\.html$/,
                use: [
                    {
                        loader: "html-loader",
                        //options: { minimize: true }
                    }
                ]
            },
            {
                test: /\.css$/,
                use: ['style-loader', 'css-loader']
            },
            {
                test: /\.(png|svg|jpg|gif)$/,
                use: ['file-loader']
            },
            {
                test: /\.(eot|svg|ttf|woff|woff2)(\?\S*)?$/,
                loader: 'file-loader'
            }
        ]
    },
    plugins: [
        new HtmlWebPackPlugin({
            template: "./src/html/index.html",
            excludeChunks: ['server']   //ignore server.js files
        }),
        new webpack.NoEmitOnErrorsPlugin(),
        new VueLoaderPlugin(),
        new MiniCssExtractPlugin({
            filename: "[name].css",
            chunkFilename: "[id].css"
        })
    ]
};
```
生产环境修改的主要是：
    1. 生成的main.js会被优化，以减少内存的使用，代码如下：
    ```
    optimization: {
            minimizer: [
                new UglifyJsPlugin({
                    cache: true,
                    parallel: true,
                    sourceMap: true // set to true if you want JS source maps
                }),
                new OptimizeCSSAssetsPlugin({})
            ]
        }
    ```
    2. 删除dev-server的引入，在生产环境，dev-server是不应该被使用的
6. 修改package运行脚本如下：
```
"scripts": {
    "start": "webpack-dev-server --open --mode development --config webpack.dev.config.js",
    "build": "webpack --mode production --config webpack.prod.config.js"
  }
```

生成代码，参考分支asa-vwe-vue