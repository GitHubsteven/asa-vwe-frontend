##### 如何实现语言后台和数据连接 #####
**分析**

如果你经历过java开发的话，那么分析一下java和mysql之间的链接，也许我们可以借鉴下，当前我们有如下角色：
1. mysql（MongoDB）
2. 后台语言Java(Js)

在java中，实现这个链接的一般有两种方式
1. Mybatis + MySQL Connector/J
2. Hibernate + MySQL Connector/J
3. xxxx + MySQL Connector/J

我们相信对于js连通MongoDB，也有类似的中间工具，没错，那就是--Mongoose。

1.安装一些依赖
```
npm i --save-dev body-parser cors
```
2. 安装mongoose
```
npm i mongoose --save-dev
```
3. 在server-dev.js中引入
```
//链接数据库
let bodyParser = require('body-parser');
let cors = require('cors');
let mongoose = require('mongoose');
//other code
//使用引入
//表示数据格式以json方式来传递？
app.use(bodyParser.json());
app.use(cors());
//服务器连接数据库
let DB_URL = "mongodb://localhost:27017/blogs";
mongoose.connect(DB_URL, {useNewUrlParser: true})
  .then(() => {
      console.log("connect successfully!")
    }, (err) => {
      console.log('error when connect to mongo db!' + err)
    }
  );
```
为了能运行正常，你必须现在本地或者DB_URL的主机不惜安装了MongoDB。执行编译运行，如果正常的话，terminal会出现connect successfully.
接下来我们需要定义类似java中的链接bean对象--schema对象。新建文件夹./src/models，新建Blog.js,代码如下：
```let mongoose = require('mongoose');
   let Schema = mongoose.Schema;
   // import CommentModel from './Comment'

   let BlogSchema = new Schema({
     title: String,
     author: String,
     body: String,
     // comments: [CommentModel],
     date: {type: Date, default: Date.now},
   });

   module.exports = mongoose.model('BlogModel', BlogSchema);
```




